generator client {
  provider        = "prisma-client-js"
  output          = "../src/generated/prisma"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  id              Int               @id @default(autoincrement())
  email           String            @unique
  username        String
  password        String
  role            String            @default("reader")
  author          author?
  chapter_comment chapter_comment[]
}

model author {
  id       Int     @id @default(autoincrement())
  userId   Int     @unique
  image    String?
  pen_name String  @unique
  gender   String
  email    String
  phone    String
  user     user    @relation(fields: [userId], references: [id])
  novel    novel[]
}

model novel {
  id              Int             @id @default(autoincrement())
  title           String
  genre           String
  synopsis        String
  content_rating  String
  authorId        Int
  cover           String
  target_audience String
  author          author          @relation(fields: [authorId], references: [id])
  chapter         novel_chapter[]
  tag             tag_novel[]
}

model novel_chapter {
  id      Int               @id @default(autoincrement())
  title   String
  content String
  novelId Int
  likes   Int               @default(0)
  share   Int               @default(0)
  comment chapter_comment[]
  novel   novel             @relation(fields: [novelId], references: [id])
}

model chapter_comment {
  id        Int           @id @default(autoincrement())
  comment   String
  likes     Int
  chapterId Int
  userId    Int
  chapter   novel_chapter @relation(fields: [chapterId], references: [id])
  user      user          @relation(fields: [userId], references: [id])
}

model tag_novel {
  id      Int    @id @default(autoincrement())
  tag     String
  novelId Int
  novel   novel  @relation(fields: [novelId], references: [id])
}

model genre {
  id         Int        @id @default(autoincrement())
  genre      String
  genre_type GenderType @default(male)
}

enum GenderType {
  male
  female
}
